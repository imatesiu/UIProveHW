<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>
<ui:composition    template="/templates/template.xhtml">

	<ui:define name="metadata">
	</ui:define>
	<ui:define name="title">
        Prove #{viewProva.nomeModello}
    </ui:define>

    <ui:define name="description">
        Informazioni Prove
    </ui:define>
	<ui:define name="content">
<script type="text/javascript">
function start() {
    PF('statusDialog').show();
}
 
function stop() {
    PF('statusDialog').hide();
}
</script>
 

 
 <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
 
 <p:outputLabel value="Nome Misuratore Fiscale:"/>
<p:outputLabel value="#{viewProva.nomeModello}"/>

</h:panelGrid>
 <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">


 <p:outputLabel value="Nome Prova:"/>
 <p:outputLabel value="#{viewProva.prova.nomeProva}"/>
  <p:graphicImage name="/images/prove/#{viewProva.prova.tp}.png" stream="false" />
 </h:panelGrid>
 
  <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
 
   <p:outputLabel value="Numero Rapporto Prova:"/>
   <p:outputLabel value="#{viewProva.numeroRapportoProva}"/>
   
   
   
    <h:outputText value="Esito: " />
        <p:selectOneButton value="#{viewProva.esito}" >
           <f:selectItems value="#{viewProva.optionEsiti}" />
        </p:selectOneButton>
        
        <h:outputText value="Insert Note: " />
         <p:inputTextarea id="textArea" value="#{viewProva.note}" rows="6" cols="33" />
        
        <h:outputText value="Insert Allegato: " />
         <p:fileUpload fileUploadListener="#{viewProva.handleFileUpload}" mode="advanced" dragDropSupport="true"
                 multiple="true"      auto="true"    update="msgs selectedTable" 
                 sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png|doc?|txt|pdf)$/" />
 
        
  </h:panelGrid>
 
    <p:dataTable id="selectedTable" var="allegato" value="#{viewProva.allegati}" rendered="#{viewProva.allegati != null}">
                <p:column headerText="Nome Alleato">
                    <h:outputText value="#{allegato.name}" />
                </p:column>
 <p:column headerText="Content Type">
                    <h:outputText value="#{allegato.contentType}" />
                </p:column>
            
              
             
               
               <p:column style="width:32px">
                 <p:commandButton icon="ui-icon-search" actionListener="#{menuView.viewallegato}" update="" immediate="true">  <!--  oncomplete="PF('ProveDialog').show()"--> 
              <!--       <f:setPropertyActionListener target="#{viewProva.prova}" value="#{prove}" />--> 
                    </p:commandButton>
                </p:column>
                
                <p:column style="width:32px">
                 <p:commandButton icon="ui-icon-arrowthick-1-s" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" immediate="true">  <!--  oncomplete="PF('ProveDialog').show()"--> 
          				    <f:setPropertyActionListener target="#{viewProva.selecteda}" value="#{allegato}"/>
          				   <p:fileDownload value="#{viewProva.download}" />
                    </p:commandButton>
                </p:column>
             <p:column style="width:32px">
                 <p:commandButton icon="ui-icon-close" immediate="true"  update="@form" action="#{viewProva.remallegato}">  
                    <f:setPropertyActionListener target="#{viewProva.selecteda}" value="#{allegato}"/>
                    </p:commandButton>
                </p:column> 
            </p:dataTable>
  
       <p:separator />
    <p:splitButton value="Save" actionListener="#{viewProva.save}" action="#{viewProva.go}" style="width:200px;" update="msgs" icon="ui-icon-disk">
        <p:separator />
        <p:menuitem value="Reset" actionListener="#{viewProva.reset}" immediate="true" ajax="false"  icon="ui-icon-close" >
         <p:resetInput target="panel" />
        </p:menuitem>
    </p:splitButton>
    
    

    <br/>
    <br/><br/>
    <br/><br/>
    <br/>
    </ui:define>

</ui:composition>
</h:body>
</html>